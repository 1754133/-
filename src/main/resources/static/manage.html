<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="https://cdn.bootcss.com/jquery/1.12.4/jquery.min.js"></script>
    <link rel="stylesheet" type="text/css" href="style.css">
</head>

<div class="header">
    <h1>欢迎使用管理员系统</h1>
</div>

<div class="navbar">
    <a href="index.html">返回主页</a>
    <a href="#" class="right">帮助</a>
    <a href="index.html" class="right">注销</a>
</div>
<body>

<ul>
    <li><a class="active" href="manage.html">查询图书信息</a></li>
    <li><a href="usersearch.html">查询读者信息</a></li>
    <li><a href="addbook.html">添加图书</a></li>
    <li><a href="queryuserborrow.html">查询读者借阅</a></li>
</ul>

<div style="margin-left:15%;padding:1px 16px;height:1000px;">
<center><br/><br/>
    <div id="manage">
        <p>请输入要查询的图书或作者:</p>
        <input type="text" id="keyword"/>
        <br/><br/>
        <a class="button black" onclick="query()">图书搜索</a>
        <br/><br/>
            <table id="booklist" border="1" hidden width=70%>
                <thead>
                <tr>
                    <th>书名</th>
                    <th>作者</th>
                    <th>书架号</th>
                    <th>操作</th>
                </tr>
                </thead>
                <tbody id="tbdata">
                </tbody>
            </table>

    </div>
</center>
</div>


<script type="text/javascript">
    function query() {
        var keyword=$("#keyword").val();
        console.log(keyword)
        $.ajax({
            type:"GET",
            url:"http://localhost:8080/books/keywords/" + keyword,
            dateType:"json",
            success:function (result) {
                console.log(result.length)
                console.log(result[0].name)
                console.log(result[0].author)
                createlist(result)
            }
        })
    }
    function createlist(data) {
        var str="";
        for(var i=0;i<data.length;i++){
            str += "<tr><td>"+data[i].name+"</td><td>"+data[i].author+"</td><td>"+
                data[i].shelfId+"</td><td width=18%>"+"<a class=\"button \" onclick=\"gotodetail("+data[i].bookId+
                ")\">图书信息修改</a>"+"</td></tr>";
            console.log(str)
        }
        $("#tbdata").html(str);
        $("#booklist").show();
    }
    function gotodetail(bookid) {
        document.cookie="bookId="+bookid
        window.open("bookinfomanage.html")
    }

</script>
</body>
</html>