<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>myborrow</title>
    <script src="https://cdn.bootcss.com/jquery/1.12.4/jquery.min.js"></script>
    <link rel="stylesheet" type="text/css" href="style.css">
</head>

<div class="header">
    <h1>欢迎使用图书管理系统</h1>
</div>

<div class="navbar">
    <a href="index.html">返回主页</a>
    <a href="#" class="right">帮助</a>
    <a href="index.html" class="right">注销</a>
</div>
<body>
<ul>
    <li><a href="mainpage.html">读者系统主页</a></li>
    <li><a href="#">查询图书信息</a></li>
    <li><a href="querybook.html">个人信息</a></li>
    <li><a class="active" href="myborrow.html">我的借阅</a></li>
</ul>
<div style="margin-left:15%;padding:1px 16px;height:1000px;"><br/><br/><br/>
    <center><table id="borrowlist" border="1" width=90%>
        <thead>
        <tr>
            <th>书名</th>
            <th>作者</th>
            <th>ISBN</th>
            <th>借书时间</th>
            <th>归还期限</th>
            <th>操作</th>
        </tr>
        </thead>
        <tbody id="bldata">

        </tbody>
    </table></center>
</div>
<script type="text/javascript">
    var userId=getCookie("id")
    function getCookie(cname){
        var name= cname+"=";
        var ca=document.cookie.split(';');
        for(var i=0;i<ca.length;i++){
            var c=ca[i].trim();
            if(c.indexOf(name)==0)
                return c.substring(name.length,c.length);
        }
        return "";
    }
    $.ajax({
        type:"GET",
        url:"http://localhost:8080/borrow/borrowinfo/" + userId,
        dataType:"json",
        success:function (result) {
            console.log(result)
            createlist(result)
        }
        }
    )
    function createlist(data) {
        var str="";
        for(var i=0;i<data.length;i++){
            str += "<tr><td><center>"+data[i].bookName+"</center></td><td><center>"+data[i].author+"</center></td><td width=20%><center>"+data[i].isbn+"</center></td><td><center>"+data[i].borrowDate+"</center></td><td><center>"+data[i].shReturnDate+"</center></td><td width=10%><center>"+"<a class=\"button\" onclick=\"renew()\">续借</a>"+"</center></td></tr>";
            console.log(str)
        }
        $("#bldata").html(str);
        $("#borrowlist").show();
    }
    function renew() {
        
    }
</script>
</body>
</html>